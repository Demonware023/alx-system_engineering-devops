#!/usr/bin/env bash
# This script configures an Ubuntu server to resolve localhost to 127.0.0.2 and facebook.com to 8.8.8.8.

# Check if running in Docker
if grep -q docker /proc/1/cgroup; then
    echo "Running in Docker, configuring hosts file..."
    # Backup the original hosts file
    cp /etc/hosts ~/hosts.new
    # Change the IP address for localhost and facebook.com in the temporary hosts file
    sed -i 's/^127\.0\.0\.1\slocalhost$/127.0.0.2 localhost/' ~/hosts.new
    sed -i 's/^.*facebook.com$/8.8.8.8 facebook.com/' ~/hosts.new
    # Replace the original hosts file with the modified copy
    cp -f ~/hosts.new /etc/hosts
    echo "Hosts file configured."
else
    echo "This script is intended to run in Docker."
    exit 1
fi
